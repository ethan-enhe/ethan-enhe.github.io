!function(){function n(){return 0}function u(){return k.length=0,k}function v(f){return!!f&&"[object Object]"===Object.prototype.toString.call(f)}var l=!1,A={load:function(f,a){var b=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");b.open("GET",f,!0);b.onreadystatechange=function(a,b){return function(){if(4===a.readyState&&200===a.status)try{b(null,JSON.parse(a.responseText))}catch(c){b(c,null)}}}(b,a);b.send()}};(function b(a){if(!(a&&"undefined"!=typeof a.required&&a.required instanceof Array))throw Error("-- OptionsValidator: required options missing");if(!(this instanceof b))return new b(a);var d=a.required;this.getRequiredOptions=function(){return d};this.validate=function(a){var b=[];return d.forEach(function(c){"undefined"==typeof a[c]&&b.push(c)}),b}});var B=function(a,b){var d=b.length,e=a.length;if(d<e)return!1;if(e===d)return a===b;var c=0,f=0;a:for(;c<e;c++){for(var h=a.charCodeAt(c);f<d;)if(b.charCodeAt(f++)===h)continue a;return!1}return!0},w=new function(){this.matches=function(a,b){return B(b.toLowerCase(),a.toLowerCase())}},x=new function(){this.matches=function(a,b){return!!a&&(a=a.trim().toLowerCase(),(b=b.trim().toLowerCase()).split(" ").filter(function(b){return 0<=a.indexOf(b)}).length===b.split(" ").length)}},m={put:function(a){if(v(a))return k.push(a),k;if(a&&"[object Array]"===Object.prototype.toString.call(a)){var b=[];u();for(var d=0,e=a.length;d<e;d++)v(a[d])&&b.push((k.push(a[d]),k));return b}},clear:u,search:function(a){if(a){for(var b=k,d=f.searchStrategy,e=f,c=[],g=0;g<b.length&&c.length<e.limit;g++){a:{var h=void 0;var p=b[g],C=a,q=d,D=e;for(h in p){for(var E=p[h],r=D.exclude,t=!1,l=0,m=(r=r||[]).length;l<m;l++){var n=r[l];!t&&(new RegExp(E)).test(n)&&(t=!0)}if(!t&&q.matches(p[h],C)){h=p;break a}}h=void 0}h&&c.push(h)}a=c.sort(f.sort)}else a=[];return a},setOptions:function(a){(f=a||{}).fuzzy=a.fuzzy||!1;f.limit=a.limit||10;f.searchStrategy=a.fuzzy?w:x;f.sort=a.sort||n}},k=[],f={fuzzy:!1,limit:10};f.searchStrategy=f.fuzzy?w:x;f.sort=n;var y={compile:function(a){return g.template.replace(g.pattern,function(b,d){var e=g.middleware(d,a[d],g.template);return void 0!==e?e:a[d]||b})},setOptions:function(a){g.pattern=a.pattern||g.pattern;g.template=a.template||g.template;"function"==typeof a.middleware&&(g.middleware=a.middleware)}},g={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}},z={merge:function(a,b){var d={},e;for(e in a)d[e]=a[e],"undefined"!=typeof b[e]&&(d[e]=b[e]);return d},isJSON:function(a){try{return!!(a instanceof Object&&JSON.parse(JSON.stringify(a)))}catch(b){return!1}}};!function(a){function b(a){c.success(a);m.put(a);(function(){c.searchInput.addEventListener("input",function(a){l||-1!==[13,16,20,37,38,39,40,91].indexOf(a.which)||(c.resultsContainer.innerHTML="",d(a.target.value))});c.searchInput.addEventListener("compositionstart",function(){l=!0});c.searchInput.addEventListener("compositionend",function(a){var b=a.which;l=!1;-1===[13,16,20,37,38,39,40,91].indexOf(b)&&(c.resultsContainer.innerHTML="",d(a.target.value))})})()}function d(a){if(a&&0<a.length){c.resultsContainer.innerHTML="";var b=m.search(a),d=b.length;if(0===d)c.resultsContainer.innerHTML+=c.noResultsText;else for(var e=0;e<d;e++)b[e].query=a,c.resultsContainer.innerHTML+=y.compile(b[e])}}function e(a){throw Error("SimpleJekyllSearch --- "+a);}var c={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},f=["searchInput","resultsContainer","json"],g=function q(a){if(!(a&&"undefined"!=typeof a.required&&a.required instanceof Array))throw Error("-- OptionsValidator: required options missing");if(!(this instanceof q))return new q(a);var b=a.required;this.getRequiredOptions=function(){return b};this.validate=function(a){var c=[];return b.forEach(function(b){"undefined"==typeof a[b]&&c.push(b)}),c}}({required:f});a.SimpleJekyllSearch=function(a){return 0<g.validate(a).length&&e("You must specify the following required options: "+f),c=z.merge(c,a),y.setOptions({template:c.searchResultTemplate,middleware:c.templateMiddleware}),m.setOptions({fuzzy:c.fuzzy,limit:c.limit,sort:c.sortMiddleware}),z.isJSON(c.json)?b(c.json):function(a){A.load(a,function(c,d){c&&e("failed to get JSON ("+a+")");b(d)})}(c.json),{search:d}}}(window)}();
